# RESTful API
## RESTFUL API
    월드 와이드 웹(World Wide Web a.k.a WWW)과 같은 분산 하이퍼미디어 시스템을 위한 소프트웨어 아키텍처의 한 형식으로 자원을 정의하고 자원에 대한 주소를 지정하는 방법 전반에 대한 패턴\
    REST란, REpresentational State Transfer 의 약자이다. 여기에 ~ful 이라는 형용사형 어미를 붙여 ~한 API 라는 표현으로 사용된다. 즉, REST 의 기본 원칙을 성실히 지킨 서비스 디자인은 'RESTful'하다라고 표현할 수 있다.\
    REST가 디자인 패턴이다, 아키텍처다 많은 이야기가 존재하는데, 하나의 아키텍처로 볼 수 있다. 좀 더 정확한 표현으로 말하자면, REST 는 Resource Oriented Architecture 이다. API 설계의 중심에 자원(Resource)이 있고 HTTP Method 를 통해 자원을 처리하도록 설계하는 것이다.
    (위키)

> ### 💡왜 필요할까?
> http 프로토콜 위에 데이터를 넣어서 내려주는 걸 `HTTP API`라고 한다.\
> 과거에 흔히 볼 수 있었던 SSR의 경우에는 서버에서 view를 반환하는 방식이다. \
> 때문에, 개발 시 하나의 브라우저 지원을 고려대상에 두고 진행되었다.

그러나 현재의 서버 프로그램은 여러 웹 브라우저, 아이폰, 안드로이드 애플리케이션과의 통신에 대응할 수 있어야 한다.\
이를 위해 매번 HTTP API를 다시 써서 서버를 배포하는 대신 **범용적인** API를 제공하는 서버 디자인이 등장하였다.

### RESTFUL API 6 가지 원칙
- 일관된 인터페이스(`Uniform interface`)\
URI로 지정한 **자원**(resource)에 대한 조작을 **통일**된 방법으로 수행하는 스타일을 말한다.


- 클라이언트 — 서버(`Client — Server`)\
자원를 제공하는 쪽이 서버, 자원을 요청 하는 쪽을 클라이언트라 한다. 이 둘은 독립적으로 분리되어 구성되어야 한다.\
각각 _**별도로**_ 개발되고 대체 가능하도록 유지 해야 한다.


- 무상태(`Stateless`)\
작업에 대한 요청의 상태 정보를 저장, 관리 하지 않는다. \
클라이언트가 context(세션, 인증, 쿠키 등의 정보)를 별도로 저장하기 때문에 요청에 대한 어떠한 상태 정보를 저장하지 않고\
단순히 요청에 대해서만 처리할 수 있어야 한다. (이를 위해 모든 요청에는 필요한 모든 정보가 포함되어야 한다.)


- 캐시 가능(`Cacheable`)\
클라이언트가 응답을 캐시하는 것.\
서버는 캐시 가능 여부를 제공해야 한다. 캐시가 가능 할 경우 클라이언트는 응답 데이터를 재 사용 하여 성능과 서버의 가용성을 올릴 수 있다.


- 계층화된 시스템(`Layered System`)\
계층화된 구조로 구성되어야 한다. \
각 계층 자신이 통신하는 컴포넌트 외 다른 계층에 대한 정보를 얻을 수 없도록 분리되어야 한다.\
❓여기서 계층이란, 서버 프로그램 내의 계층(MVC같은 패턴)이 아닌, 로드 밸런싱, 공유 캐시 같은 `중간서버`를 말한다.\
따라서 클라이언트는 대상 서버에 직접 연결되었는지, 또는 중간 서버를 통해 연결되었는지 인지 할 수 없다.


- 주문형 코드(선택사항)(`Code on Demand`)\
클라이언트는 서버로부터 실행시킬 수 있는 로직(`js` 같은 코드)을 다운 받아 기능을 확장, 실행시킬 수 있다. \
이를 통해 클라이언트가 사전에 구현해야 하는 기능의 수를 줄여 간소화 시킬 수 있다.


### 2가지 디자인 가이드
#### 첫 번째, URI는 정보의 자원을 표현해야 한다.
리소스 와 행위 를 명시적이고 직관적으로 분리한다.\
리소스는 URI로 표현되는데 리소스가 가리키는 것은 명사로 표현되어야 한다.\
흔히 경로를 표현하는 `/`는 계층 관계를 나타내기 위해 사용한다.\
**확장자를 가려야 한다.**(`.html`같은)
#### 두 번째, 자원에 대한 행위는 HTTP Method로 표현한다.
행위는 HTTP Method로 표현하고, `GET/POST/PUT(전체 수정)/PATCH(일부 수정)/DELETE`을 분명한 목적으로 사용한다.\
url에 create-000, update-000..를 사용하지 않고, HTTP요청 메소드를 이용해 url통합, API를 표현한다.\
Message 는 Header 와 Body 를 명확하게 분리해서 사용한다. 

> ### 💡`GET/POST/PUT/DELETE` == `CRUD`?
> 흔히 함께 엮어서 소개되기 때문에 연관이 있다고 오해하기 쉽지만, 엄연히 다른 개념이다. \
> CRUD를 오로지 GET으로만 표현할수도, POST로만 표현할 수도 있다.\
> **단, 적절한 행위에 맞춰 쓴다면, 효율이 올라갈 것이다.**

### 장단점
#### 👍
- Open API 를 제공하기 쉽다
- 멀티플랫폼 지원 및 연동이 용이하다.
- 원하는 타입으로 데이터를 주고 받을 수 있다.
- 기존 웹 인프라(HTTP)를 그대로 사용할 수 있다.

#### 👎
- 사용할 수 있는 메소드가 한정적이다.
- 분산환경에는 부적합하다.
- HTTP 통신 모델에 대해서만 지원한다.
- PATCH, PUT, DELETE를 제공하지 않는 브라우저의 경우 별도의 처리가 필요하다.
- 오히려 HTTP method 방식이 익숙하지 않다면, 더 어려울 수 있다.

Reference
https://github.com/JaeYeopHan/Interview_Question_for_Beginner/tree/main/Development_common_sense#restful-api
https://meetup.nhncloud.com/posts/92
https://spoqa.github.io/2012/02/27/rest-introduction.html
https://medium.com/tech-pentasecurity/restful-api-%EB%84%A4%EC%9D%B4%EB%B0%8D-7c81bdb9da63