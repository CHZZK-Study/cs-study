# 멀티 스레드 (Multi thread)

### 스레드 (Thread)

스레드는 프로세스 내에서 실행되는 실행 단위이다. 각 프로세스는 최소한 하나의 스레드, 즉 주 스레드(main thread)를 가지고 있으며, 이 주 스레드는 프로그램의 시작점이 되고 프로그램의 끝까지 실행된다.

스레드는 동일한 프로세스 내에서 다른 스레드와 공유하는 메모리 공간을 가지며, 이를 통해 서로 효율적으로 통신할 수 있다.

<br>

### 스레드의 장점

스레드는 프로그램의 작업을 분리하여 병렬적으로 실행하게 된다

**1. 응답성 향상**

멀티스레드를 사용하면 여러 작업을 동시에 처리할 수 있으므로,프로그램의 응답성이 향상된다. 예를 들어, GUI 응용 프로그램에서는 UI 스레드와 백그라운드 스레드를 별도로 사용하여 UI의 응답성을 유지하면서 작업을 수행할 수 있다.

**2. 자원 공유**

스레드는 같은 프로세스 내에서 실행되기 때문에 프로세스의 자원을 공유할 수 있다. 이를 통해 스레드 간의ㅣ 데이터 공유가 간단하고 효율적으로 이루어진다.

**3. 성능 향상**

멀티스레딩을 사용하면 여러 작업을 동시에 처리할 수 있으므로, 작업을 병렬적으로 실행하여 전체적인 성능을 향상 시킬 수 있다

<br>

### 스레드 사용의 주의점

<br>

**동기화 문제**

여러 스레드가 동시에 공유된ㄴ 자원에 접근할 떄 데이터의 일관성을 유지하기 위해 동기화가 필요하다. 이를 젲대로 처리하지 않으면 예상치 못한 결과가 발생할 수 있다.

<br>

**데드락**

두 개 이상의 스레드가 서로 상대방의 작업이 끝나기를 기다리며 무한히 대기하는 상태를 말한다. 이를 피하기 위해 스레드 간의 잘못된 순서로 자원을 요청하는 경우를 주의해야 한다.

<br>

**오버헤드**

스레드를 생성하고 관리하는 데에는 오버헤드가 발생할 수 있다. 너무 많은 스레드를 생성하면 시스템 자원을 과도하게 사용하여 성능이 저하될 수 있다.

<br>

### 멀티 스레드 (Multi thread)

멀티스레드는 하나의 프로세스 내에서 여러 개의 스레드가 동시에 실행되는 것을 의미한다. 예를들어 하나의 집(프로세스) 안에서 여러 사람(스레드)이 동시에 여러가지 일을 하는 것으로 비유 할 수 있다.

<br>

**1. 동작 원리**

- 하나의 프로세스는 최소한 하나의 스레드를 가지고 있다. 이 스레드를 주 스레드(main thread)라고 한다. 주 스레드는 프로그램의 시작점이 되어 프로그램의 실행을 시작한다.

- 멀티 스레딩은 주 스레드 이외에도 여러 추가적인 스레드를 생성하여 동시에 여러 작업을 수행할 수 있다.

<br>

**2. 공유 자원**

- 멀티스레드에서는 스레드들이 같은 프로세스 내의 자원(메모리,파일 등)을 공유한다. 이를 통해 스레드 간의 효율적인 데이터 공유와 통신이 가능하다.

- 공유 자원에 대한 동시 접근은 주의가 필요하다. 여러 스레드가 동시에 공유 자원을 수정할 때 데이터 불일치나 예기치 못한 동작이 발생할 수 있다.

<br>

**3. 동기화(Synchronization)**

- 멀티스레드에서는 여러 스레드가 동시에 실행되기 때문에 공유 자원에 대한 접근을 동기화하는 것이 중요하다. 동기화를 통해 스레드 간의 작업이 순서대로 실행되도록 보장할 수 있다.

- 동기화를 위해 락(lock)과 언락(unlock) 메커니즘이 사용된다. 락을 획득한 스레드만이 공유 자원에 접근할 수 있다.

<br>

**4. 스레드 풀(Thread Pool)**

- 대규모 멀티스레드 애플리케이션에서는 스레드를 생성하는 비용이 크기 때문에 스레드 풀을 사용하여 스레드의 재사용을 최적화한다.

- 스레드 풀은 미리 생성된 스레드를 관리하고 작업을 할당하는 방식으로 동작한다.

<br>

**5. 장단점**

- 장점: 멀티스레딩은 작업을 병렬로 처리하여 성능을 향상 시킬 수 있다. 또한, 스레드간의 자원 공유를 통해 효율적인 데이터 공유가 가능하다.

- 단점: 동기화 작업이 필요하고 데드락과 경쟁 상태 등의 문제가 발생할 수 있다. 또한, ㄴ무 많은 스레드를 생성하면 오버헤드가 발생하여 성능이 저하 될 수 있다.
